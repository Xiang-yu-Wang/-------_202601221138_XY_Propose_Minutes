# 公告管理工具使用指南

## 📌 功能概述

建立了一個簡易的公告編輯管理工具，讓老闆可以直接在網頁上新增、編輯、刪除公告，**無需程式碼知識**，編輯內容**即時同步**到網站首頁和公告頁面。

---

## 🚀 快速開始

### 1️⃣ 訪問管理後台
- **地址**: `http://localhost:5173/#/admin` （開發環境）
- **或生產環境**: 網站域名 + `/#/admin`

### 2️⃣ 登入
- **預設密碼**: `admin123`
- 輸入密碼後點擊「登入」

### 3️⃣ 管理公告
進入後台後，您可以：

#### ✏️ 新增公告
1. 點擊「新增公告」按鈕
2. 填寫以下資訊：
   - **標題**: 公告的標題（必填）
   - **日期**: 公告日期（自動預填今天，可改）
   - **類型**: 選擇類型
     - 🔴 **重要** - 紅色標籤，用於緊急通知
     - 🟢 **新消息** - 綠色標籤，用於新功能或調整
     - 🔵 **一般資訊** - 藍色標籤，用於普通訊息
   - **標籤** (可選): 用逗號分隔，如 `服務, 時程, 重要`
   - **內容**: 詳細的公告內容（必填）
3. 點擊「新增」確認

#### 📝 編輯公告
1. 在公告列表中找到要編輯的公告
2. 點擊「編輯」按鈕
3. 修改內容
4. 點擊「更新」保存

#### 🗑️ 刪除公告
1. 在公告列表中找到要刪除的公告
2. 點擊「刪除」按鈕
3. 確認刪除

---

## 💾 數據備份與復原

### 📥 導出公告
定期導出公告備份，防止數據丟失：
1. 點擊「導出」按鈕
2. 自動下載 JSON 檔案到您的電腦
3. 妥善保管

### 📤 導入公告
如需恢復之前導出的備份：
1. 點擊「導入」按鈕
2. 選擇之前導出的 JSON 檔案
3. 確認導入

### ⚠️ 重置為預設
恢復到網站初始公告：
1. 點擊「重置」按鈕
2. 確認重置（**此操作無法撤銷**）

---

## ⚙️ 配置密碼

如需修改管理後台密碼：

### 開發環境
編輯 `.env` 檔案：
```dotenv
VITE_ADMIN_PASSWORD=your_password_here
```

### 生產環境
編輯 `.env.production` 檔案（如果存在）或 `.env` 檔案，修改密碼後重新 build：
```bash
bun run build
```

---

## 📱 使用場景

### 例1：春節公告
```
標題: 春節服務公告
日期: 2026-02-05
類型: 重要
標籤: 服務, 時程
內容: 春節期間照常收件與寄送，配送時程較平常延後 1-2 天，請提前安排。聯絡電話：0982-571-134（贊哥）。
```

### 例2：方案調整
```
標題: 2026 Q1 方案調整
日期: 2026-01-20
類型: 新消息
標籤: 費率, 方案
內容: 全餐方案一維持不變；方案二（超商儲值卡）調整為單筆加收 30 元通路手續費，詳細內容見方案頁。
```

---

## ⚠️ 重要提醒

### 💡 如何同步到網站
- ✅ **開發環境**: 編輯後立即同步，無需重啟
- ✅ **生產環境** (已上線): 
  - 編輯後立即生效（使用瀏覽器本地儲存）
  - 但**需要重新部署**才能在新設備上看到更新

### 🔒 瀏覽器本地儲存說明
- 公告數據存儲在瀏覽器的 `localStorage` 中
- **優點**: 無需後端，即時更新，簡單易用
- **缺點**: 
  - 數據只存在當前設備/瀏覽器上
  - 清除瀏覽器快取會遺失數據（所以要經常備份！）
  - 不同設備需要分別編輯

### 🎯 建議做法
1. **定期備份**: 每次編輯後點擊「導出」備份
2. **保留副本**: 將導出的 JSON 檔案存放在雲端（Google Drive、Dropbox 等）
3. **備註更新**: 在 `announcements.ts` 中寫下更新時間和內容

---

## 🔧 技術細節

### 公告數據結構
```typescript
{
  id: number,                           // 唯一識別碼（自動生成）
  title: string,                        // 標題
  date: string,                         // 日期 (YYYY-MM-DD 格式)
  type: 'important' | 'new' | 'info',  // 類型
  tags?: string[],                      // 標籤陣列（可選）
  content: string                       // 內容
}
```

### 涉及的檔案
- `src/composables/useAnnouncementManager.ts` - 公告管理邏輯
- `src/components/AdminPanel.vue` - 管理面板 UI
- `src/views/AdminView.vue` - 管理頁面（含密碼登入）
- `src/components/AnnouncementBanner.vue` - 首頁公告橫幅
- `src/components/AnnouncementsSection.vue` - 公告頁面列表
- `src/router/index.ts` - 新增 `/admin` 路由
- `.env` - 環境變數配置

---

## 📞 遇到問題？

### 公告沒有更新？
1. 確認已點擊「新增」或「更新」按鈕
2. 刷新頁面（Ctrl+F5 或 Cmd+Shift+R）
3. 檢查瀏覽器主控台是否有錯誤（F12 → Console）

### 密碼忘記？
修改 `.env` 檔案中的 `VITE_ADMIN_PASSWORD`，然後重新啟動開發伺服器：
```bash
bun run dev
```

### 資料丟失？
從備份的 JSON 檔案點擊「導入」恢復，或聯絡開發者重置。

---

## 📅 更新日誌

**建立日期**: 2026-01-27
- ✅ 實現公告新增、編輯、刪除功能
- ✅ 實現導出/導入備份功能
- ✅ 實現密碼登入保護
- ✅ 即時同步到首頁和公告頁面

---

**祝使用愉快！** 🎉
