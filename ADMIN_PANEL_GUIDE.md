# 管理後臺完整使用指南

## 📖 目錄
1. [系統概述](#系統概述)
2. [登入與訪問](#登入與訪問)
3. [公告管理](#公告管理)
4. [產品管理](#產品管理)
5. [GitHub 同步](#github-同步)
6. [數據備份與恢復](#數據備份與恢復)
7. [常見問題](#常見問題)
8. [技術細節](#技術細節)

---

## 🎯 系統概述

管理後臺是一個簡單易用的網頁管理工具，讓您無需程式碼知識即可管理網站內容。主要功能包括：

- ✅ **公告管理** - 新增/編輯/刪除網站公告
- ✅ **產品管理** - 上傳/管理販售產品
- ✅ **GitHub 同步** - 一鍵同步到 GitHub 自動部署
- ✅ **數據備份** - 導出/導入 JSON 備份檔案
- ✅ **即時生效** - 本地預覽立即生效

---

## 🔐 登入與訪問

### 訪問地址

**開發環境**（測試用）：
```
http://localhost:5173/admin
```

**生產環境**（正式網站）：
```
https://你的網站域名/admin
```

### 登入方式

系統使用 **Supabase 認證**，提供企業級安全性：

1. 在登入頁面輸入 **Email** 和 **密碼**
2. 點擊「登入管理後台」按鈕
3. 登入成功後即可開始管理

### 帳號管理

管理員帳號在 Supabase Dashboard 中建立：
1. 前往 [Supabase Dashboard](https://supabase.com/dashboard)
2. 選擇專案 → **Authentication** → **Users**
3. 點擊 **Add user** 建立新管理員

### 安全特性

✅ **Supabase 認證優勢**:
- 🔒 企業級密碼加密
- 🛡️ Row Level Security (RLS) 保護資料
- 🔑 JWT Token 認證
- 📧 支援 Email 驗證（可選）

---

## 📢 公告管理

### 新增公告

1. **點擊「新增公告」按鈕**
2. **填寫公告資訊**：
   - **標題** (必填): 公告標題，建議簡潔明瞭
   - **日期** (必填): 公告發布日期，預設為今天
   - **類型** (必填): 選擇公告類型
     - 🔴 **重要** - 紅色，用於緊急通知
     - 🟢 **新消息** - 綠色，用於新功能/調整
     - 🔵 **一般資訊** - 藍色，用於普通訊息
   - **標籤** (選填): 用逗號分隔，如 `服務, 時程, 重要`
   - **內容** (必填): 詳細的公告內容，支援多行文字
3. **點擊「新增」按鈕**

### 編輯公告

1. 在公告列表中找到要編輯的公告
2. 點擊「編輯」按鈕（鉛筆圖示）
3. 修改內容
4. 點擊「更新」保存

### 刪除公告

1. 在公告列表中找到要刪除的公告
2. 點擊「刪除」按鈕（垃圾桶圖示）
3. 確認刪除操作

### 公告統計

在公告管理頁面頂部可以看到統計資訊：
- 📊 總數量
- 🔴 重要公告數量
- 🟢 新消息數量
- 🔵 一般資訊數量

---

## 🛍️ 產品管理

### 新增產品

1. **切換到「產品管理」頁籤**
2. **點擊「新增產品」按鈕**
3. **填寫產品資訊**：
   - **產品名稱** (必填): 產品名稱，如「高級禮盒組合」
   - **分類** (必填): 產品分類，如「禮品盒」「食品」「飲品」
   - **價格** (必填): 產品售價，輸入數字（單位：元）
   - **產品描述** (必填): 詳細說明產品特色
   - **產品圖片** (必填): 上傳產品圖片
     - 支援格式: JPG, PNG, GIF, WebP
     - 檔案大小限制: 500KB
     - 建議尺寸: 300x200 像素
   - **立即上架**: 勾選後產品立即在網站顯示
4. **點擊「新增」按鈕**

### 上傳圖片注意事項

✅ **最佳做法**:
- 使用高品質但壓縮過的圖片
- 建議寬度 300-600px
- 保持 3:2 或 4:3 的寬高比
- 檔案大小控制在 500KB 以下

❌ **避免**:
- 超大原圖（會導致上傳失敗）
- 過小或模糊的圖片
- 過長或過扁的比例

### 編輯產品

1. 在產品列表中找到要編輯的產品
2. 點擊「編輯」按鈕（鉛筆圖示）
3. 修改資訊
4. 如需更換圖片，重新上傳新圖片
5. 點擊「更新」保存

### 上架/下架產品

- 點擊「上架」或「下架」按鈕（眼睛圖示）
- 下架的產品不會在前台顯示
- 資料仍然保留，可以隨時重新上架

### 刪除產品

1. 點擊紅色的垃圾桶圖示
2. 確認刪除
3. ⚠️ **注意**: 刪除後無法復原，建議先導出備份

### 產品統計

在產品管理頁面頂部可以看到統計資訊：
- 📦 總產品數量
- ✅ 已上架數量
- ❌ 已下架數量
- 📁 各分類數量

---

## 🔄 GitHub 同步

### 功能說明

GitHub 同步功能讓您一鍵將本地的公告和產品數據同步到 GitHub 遠端倉庫，自動觸發 CI/CD 部署流程，實現自動化部署。

### 第一次使用前準備

#### 1. 取得 GitHub Personal Access Token

1. 登入您的 GitHub 帳號
2. 前往 **Settings** > **Developer settings** > **Personal access tokens** > **Tokens (classic)**
3. 點擊 **Generate new token (classic)**
4. 設定 Token:
   - **Note**: 填寫用途說明，如「管理後臺同步」
   - **Expiration**: 選擇有效期限（建議選擇 90 天或自訂）
   - **Select scopes**: 勾選 `repo`（完整存取私有倉庫）
5. 點擊 **Generate token**
6. **⚠️ 重要**: 立即複製 Token，之後無法再次查看

#### 2. 儲存 Token 到管理後臺

1. 在管理後臺點擊「GitHub Token 設定」按鈕（鑰匙圖示）
2. 貼上剛才複製的 Token
3. 點擊「儲存」
4. Token 會安全地保存在瀏覽器本地

### 同步操作

#### 同步公告

1. 在「公告管理」頁籤
2. 點擊「同步到 GitHub」按鈕（GitHub 圖示）
3. 確認同步操作
4. 等待同步完成
5. 系統會提示：「公告已同步到 GitHub！請等待 GitHub Actions 自動部署完成（約 1-2 分鐘）」

#### 同步產品

1. 在「產品管理」頁籤
2. 點擊「同步到 GitHub」按鈕（GitHub 圖示）
3. 確認同步操作
4. 等待同步完成
5. 系統會提示：「產品已同步到 GitHub！請等待 GitHub Actions 自動部署完成（約 1-2 分鐘）」

### 同步流程說明

```
本地編輯 → 點擊同步 → 更新 GitHub 檔案 → 觸發 CI/CD → 自動部署到網站
  (即時)      (2-5秒)        (立即)          (1-2分鐘)      (即時生效)
```

### 注意事項

⚠️ **同步前請確認**:
- Token 已正確設定且未過期
- 網路連線正常
- 本地數據是您想要的最新版本

✅ **同步後**:
- 等待 1-2 分鐘讓 GitHub Actions 完成部署
- 清除瀏覽器快取後重新載入網站
- 確認更新已經生效

### Token 管理

- **查看 Token 狀態**: Token 設定後會在按鈕顯示「已設定」
- **更換 Token**: 點擊設定按鈕，輸入新的 Token 即可覆蓋
- **清除 Token**: 在設定對話框中點擊「清除」按鈕

---

## 💾 數據備份與恢復

### 為什麼需要備份？

- 防止誤刪資料
- 在重大更新前保留舊版本
- 可以在不同環境之間遷移數據
- 作為災難恢復的保險

### 導出備份（公告）

1. 在「公告管理」頁籤
2. 點擊「導出」按鈕（下載圖示）
3. 系統會下載一個 JSON 檔案
4. 檔案命名格式: `announcements_YYYY-MM-DD.json`

### 導出備份（產品）

1. 在「產品管理」頁籤
2. 點擊「導出」按鈕（下載圖示）
3. 系統會下載一個 JSON 檔案
4. 檔案命名格式: `products_YYYY-MM-DD.json`

### 導入備份（公告）

1. 在「公告管理」頁籤
2. 點擊「導入」按鈕（上傳圖示）
3. 選擇之前導出的 JSON 檔案
4. 系統會自動讀取並覆蓋當前數據
5. 確認導入成功

### 導入備份（產品）

1. 在「產品管理」頁籤
2. 點擊「導入」按鈕（上傳圖示）
3. 選擇之前導出的 JSON 檔案
4. 系統會自動讀取並覆蓋當前數據
5. 確認導入成功

### 重置為預設值

如果需要恢復到系統預設狀態：

1. 點擊「重置為預設值」按鈕（重新整理圖示）
2. 確認重置操作
3. ⚠️ **警告**: 此操作會刪除所有自訂內容

### 備份建議

📅 **建議備份時機**:
- 每週定期備份一次
- 做重大修改前先備份
- 刪除大量內容前先備份
- 使用 GitHub 同步前先備份一次本地版本

---

## ❓ 常見問題

### Q1: 修改後什麼時候生效？

**本地開發環境**: 立即生效，刷新頁面即可看到  
**生產環境（GitHub 同步後）**: 需要等待 1-2 分鐘讓 CI/CD 完成部署

### Q2: 圖片上傳失敗怎麼辦？

**可能原因**:
- 圖片檔案超過 500KB → 壓縮圖片後重試
- 圖片格式不支援 → 確認是 JPG/PNG/GIF/WebP
- 圖片檔案損壞 → 使用其他圖片

**解決方案**:
- 使用線上壓縮工具（如 TinyPNG）
- 調整圖片尺寸到 300-600px 寬度
- 確保圖片格式正確

### Q3: GitHub 同步失敗怎麼辦？

**可能原因**:
- Token 未設定或已過期
- Token 權限不足
- 網路連線問題
- 檔案路徑錯誤

**解決步驟**:
1. 檢查 Token 是否已設定（按鈕顯示「已設定」）
2. 確認 Token 具有 `repo` 權限
3. 檢查網路連線
4. 重新生成 Token 並設定
5. 查看瀏覽器控制台錯誤訊息

### Q4: 導入備份失敗怎麼辦？

**可能原因**:
- JSON 檔案格式錯誤
- 檔案不是正確的備份檔
- 檔案已損壞

**解決方案**:
- 確認使用的是從系統導出的 JSON 檔案
- 不要手動編輯 JSON 檔案
- 如果檔案損壞，使用其他備份檔案

### Q5: 忘記密碼怎麼辦？

預設密碼是 `admin123`。如果需要修改密碼，請聯繫技術人員。

### Q6: 可以在手機上使用嗎？

可以，管理後臺支援響應式設計，可以在手機、平板上使用。但建議使用電腦操作以獲得最佳體驗。

### Q7: 刪除的內容可以恢復嗎？

**本地刪除**: 如果有備份 JSON 檔案，可以透過導入備份恢復  
**已同步到 GitHub**: 可以從 GitHub 的歷史記錄中恢復（需要技術人員協助）

### Q8: 多人可以同時使用嗎？

⚠️ **注意**: 目前系統不支援多人協作編輯，如果多人同時編輯可能會導致數據衝突。建議：
- 指定一位管理員負責內容更新
- 或約定好編輯時間避免衝突

---

## 🔧 技術細節

### 數據存儲

- **本地開發**: 數據保存在 `localStorage`，每個瀏覽器獨立
- **生產環境**: 數據存儲在 `src/data/announcements.ts` 和 `src/data/products.ts`

### 圖片處理

- 圖片轉換為 Base64 格式存儲
- 優點: 無需額外圖床，數據完整
- 缺點: 增加 JSON 檔案大小
- 建議: 控制圖片大小在 500KB 以內

### GitHub API 整合

使用 GitHub REST API v3:
- 取得檔案內容: `GET /repos/{owner}/{repo}/contents/{path}`
- 更新檔案: `PUT /repos/{owner}/{repo}/contents/{path}`
- 認證方式: Bearer Token

### CI/CD 流程

```yaml
推送到 main 分支
  ↓
觸發 GitHub Actions
  ↓
執行建置流程 (bun install + bun run build)
  ↓
部署到託管平台 (Netlify/Vercel/GitHub Pages)
  ↓
網站自動更新
```

### 系統架構

```
前端界面 (AdminPanel.vue)
  ↓
組合函數層 (useAnnouncementManager, useProductManager, useGitHubSync)
  ↓
數據層 (localStorage / JSON 檔案)
  ↓
GitHub API
  ↓
遠端倉庫
  ↓
CI/CD 自動部署
```

### 相關檔案

- `src/components/AdminPanel.vue` - 管理後臺主界面
- `src/composables/useAnnouncementManager.ts` - 公告管理邏輯
- `src/composables/useProductManager.ts` - 產品管理邏輯
- `src/composables/useGitHubSync.ts` - GitHub 同步邏輯
- `src/data/announcements.ts` - 公告數據檔案
- `src/data/products.ts` - 產品數據檔案
- `src/router/index.ts` - 路由配置

### 技術棧

- **前端框架**: Vue 3 (Composition API)
- **類型系統**: TypeScript
- **UI 組件**: shadcn-vue
- **樣式**: Tailwind CSS v4
- **構建工具**: Vite
- **包管理**: Bun

---

## 📚 相關文檔

- [公告管理詳細指南](./ANNOUNCEMENT_MANAGEMENT_GUIDE.md)
- [產品管理詳細指南](./PRODUCT_MANAGEMENT_GUIDE.md)
- [產品上傳快速入門](./PRODUCT_UPLOAD_QUICKSTART.md)
- [老闆快速開始指南](./QUICK_START_FOR_BOSS.md)
- [快速參考手冊](./QUICK_REFERENCE.md)

---

## 📞 技術支援

如遇到技術問題或需要協助，請聯繫：

- 檢查相關文檔中的常見問題章節
- 查看瀏覽器控制台的錯誤訊息
- 聯繫技術支援人員

---

## 📝 更新日誌

### 2026-01-28
- ✅ 新增 GitHub 同步功能
- ✅ 支援一鍵部署到生產環境
- ✅ 新增 Token 管理功能

### 2026-01-22
- ✅ 新增產品管理功能
- ✅ 支援圖片上傳
- ✅ 新增產品上架/下架功能

### 初始版本
- ✅ 公告管理基礎功能
- ✅ 數據導入/導出功能
- ✅ 管理後臺界面

---

**祝使用愉快！** 🎉
